<!DOCTYPE html>
<html>
<head>
    <title>æ‰«æç»“æœé—®é¢˜è§£å†³æŒ‡å—</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .code { background: #f4f4f4; padding: 10px; border-left: 4px solid #ccc; margin: 10px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; padding: 10px; border-radius: 4px; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ æ‰«æç»“æœé—®é¢˜è§£å†³æŒ‡å—</h1>
    
    <div class="warning">
        <h2>âš ï¸ å½“å‰é—®é¢˜</h2>
        <p>æ‰«æç»“æœæ˜¾ç¤ºæ‰€æœ‰50ä¸ªè½¯ä»¶éƒ½æ˜¯"åˆè§„å®‰è£…"ï¼Œè¿è§„å’Œæœªç™»è®°éƒ½æ˜¯0æ¡ã€‚</p>
        <p>è°ƒè¯•ä¿¡æ¯æ˜¾ç¤ºæœ‰50æ¡ç™½åå•å’Œ50æ¡é»‘åå•è§„åˆ™ï¼Œä½†æ˜¾ç¤ºä¸º"Array"æ ¼å¼ã€‚</p>
    </div>

    <h2>ğŸ¯ å¯èƒ½çš„åŸå› </h2>
    <ol>
        <li><strong>æ•°æ®åº“è¡¨ä¸ºç©º</strong> - è™½ç„¶æ˜¾ç¤º50æ¡è§„åˆ™ï¼Œä½†å®é™…æ•°æ®å¯èƒ½ä¸ºç©º</li>
        <li><strong>ç™½åå•è§„åˆ™è¿‡äºå®½æ³›</strong> - åŒ…å«çŸ­è¯æ±‡æˆ–é€šç”¨è§„åˆ™å¯¼è‡´è¿‡åº¦åŒ¹é…</li>
        <li><strong>æ•°æ®ç»“æ„é—®é¢˜</strong> - è§„åˆ™æ•°æ®æ ¼å¼ä¸æ­£ç¡®</li>
    </ol>

    <h2>ğŸš€ ç«‹å³è§£å†³æ–¹æ¡ˆ</h2>

    <h3>æ­¥éª¤1: æ£€æŸ¥æ•°æ®åº“è¡¨çŠ¶æ€</h3>
    <p>åœ¨GLPIæ•°æ®åº“ä¸­æ‰§è¡Œä»¥ä¸‹SQLæŸ¥è¯¢ï¼š</p>
    <div class="code">
SELECT COUNT(*) as ç™½åå•æ•°é‡ FROM glpi_plugin_softwaremanager_whitelists WHERE is_active = 1;<br>
SELECT COUNT(*) as é»‘åå•æ•°é‡ FROM glpi_plugin_softwaremanager_blacklists WHERE is_active = 1;<br><br>

-- æŸ¥çœ‹ç™½åå•æ ·æœ¬<br>
SELECT name, exact_match, is_active FROM glpi_plugin_softwaremanager_whitelists LIMIT 5;<br><br>

-- æŸ¥çœ‹é»‘åå•æ ·æœ¬<br>
SELECT name, exact_match, is_active FROM glpi_plugin_softwaremanager_blacklists LIMIT 5;
    </div>

    <h3>æ­¥éª¤2: æ ¹æ®æ£€æŸ¥ç»“æœé€‰æ‹©è§£å†³æ–¹æ¡ˆ</h3>

    <h4>ğŸ…°ï¸ å¦‚æœè¡¨ä¸ºç©ºæˆ–æ•°æ®å¼‚å¸¸</h4>
    <div class="code">
-- æ¸…ç©ºç°æœ‰æ•°æ®<br>
DELETE FROM glpi_plugin_softwaremanager_whitelists;<br>
DELETE FROM glpi_plugin_softwaremanager_blacklists;<br><br>

-- åˆ›å»ºç²¾ç¡®çš„æµ‹è¯•æ•°æ®<br>
INSERT INTO glpi_plugin_softwaremanager_whitelists (name, exact_match, is_active, date_creation) VALUES<br>
('Bonjour', 1, 1, NOW()),<br>
('Microsoft Visual C++ 2019 Redistributable (x64) - 14.29.30139', 1, 1, NOW());<br><br>

INSERT INTO glpi_plugin_softwaremanager_blacklists (name, exact_match, is_active, date_creation) VALUES<br>
('Adobe Genuine Service', 1, 1, NOW()),<br>
('barrier', 0, 1, NOW()),<br>
('64 Bit HP CIO', 0, 1, NOW());
    </div>

    <h4>ğŸ…±ï¸ å¦‚æœè¡¨æœ‰æ•°æ®ä½†è¿‡åº¦åŒ¹é…</h4>
    <div class="code">
-- ä¸´æ—¶ç¦ç”¨æ‰€æœ‰é€šé…ç¬¦è§„åˆ™<br>
UPDATE glpi_plugin_softwaremanager_whitelists SET is_active = 0 WHERE exact_match = 0;<br><br>

-- åªä¿ç•™ç²¾ç¡®åŒ¹é…è§„åˆ™<br>
UPDATE glpi_plugin_softwaremanager_whitelists SET is_active = 1 WHERE exact_match = 1 AND name IN (<br>
&nbsp;&nbsp;'Bonjour',<br>
&nbsp;&nbsp;'64 Bit HP CIO Components Installer'<br>
);
    </div>

    <h4>ğŸ…²ï¸ å¦‚æœéœ€è¦å®Œå…¨é‡ç½®</h4>
    <div class="code">
-- ç¦ç”¨æ‰€æœ‰è§„åˆ™<br>
UPDATE glpi_plugin_softwaremanager_whitelists SET is_active = 0;<br>
UPDATE glpi_plugin_softwaremanager_blacklists SET is_active = 0;<br><br>

-- åªå¯ç”¨æœ€å°‘çš„æµ‹è¯•è§„åˆ™<br>
UPDATE glpi_plugin_softwaremanager_whitelists SET is_active = 1 WHERE name = 'Bonjour';<br>
UPDATE glpi_plugin_softwaremanager_blacklists SET is_active = 1 WHERE name = 'Adobe Genuine Service';
    </div>

    <h3>æ­¥éª¤3: éªŒè¯ä¿®å¤ç»“æœ</h3>
    <div class="success">
        <p><strong>æ‰§è¡ŒSQLåï¼Œé‡æ–°è¿è¡Œåˆè§„æ€§æ‰«æï¼Œé¢„æœŸç»“æœï¼š</strong></p>
        <ul>
            <li>âœ… åˆè§„å®‰è£…: 1-2æ¡ (å¦‚Bonjour)</li>
            <li>âŒ è¿è§„å®‰è£…: 1-3æ¡ (å¦‚Adobe Genuine Service, Barrierç­‰)</li>
            <li>â“ æœªç™»è®°å®‰è£…: 45-48æ¡ (å…¶ä»–æ‰€æœ‰è½¯ä»¶)</li>
        </ul>
    </div>

    <h2>ğŸ” æ•…éšœæ’é™¤</h2>

    <h3>å¦‚æœä»ç„¶æ˜¾ç¤ºæ‰€æœ‰è½¯ä»¶ä¸ºåˆè§„</h3>
    <ol>
        <li>æ£€æŸ¥ç™½åå•æ˜¯å¦å®Œå…¨ä¸ºç©ºï¼š
            <div class="code">SELECT COUNT(*) FROM glpi_plugin_softwaremanager_whitelists WHERE is_active = 1;</div>
        </li>
        <li>æ£€æŸ¥æ˜¯å¦æœ‰è¿‡äºå®½æ³›çš„è§„åˆ™ï¼š
            <div class="code">SELECT name FROM glpi_plugin_softwaremanager_whitelists WHERE is_active = 1 AND exact_match = 0 AND LENGTH(name) <= 4;</div>
        </li>
        <li>æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£ç¡®è¯»å–æ•°æ®åº“ï¼šè®¿é—® <code>simple_check.php</code></li>
    </ol>

    <h3>å¦‚æœè„šæœ¬æ— æ³•æ‰§è¡Œ</h3>
    <ul>
        <li>ç›´æ¥åœ¨æ•°æ®åº“ç®¡ç†å·¥å…·(å¦‚phpMyAdmin)ä¸­æ‰§è¡ŒSQL</li>
        <li>æ£€æŸ¥GLPIæ’ä»¶ç›®å½•çš„æ–‡ä»¶æƒé™</li>
        <li>æŸ¥çœ‹GLPIé”™è¯¯æ—¥å¿—: <code>files/_log/php-errors.log</code></li>
    </ul>

    <div class="error">
        <h3>ğŸ†˜ ç´§æ€¥è§£å†³æ–¹æ¡ˆ</h3>
        <p>å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½å¤±è´¥ï¼Œæ‰§è¡Œè¿™ä¸ªæœ€å°åŒ–è§£å†³æ–¹æ¡ˆï¼š</p>
        <div class="code">
-- å®Œå…¨æ¸…ç©ºè§„åˆ™è¡¨<br>
TRUNCATE TABLE glpi_plugin_softwaremanager_whitelists;<br>
TRUNCATE TABLE glpi_plugin_softwaremanager_blacklists;<br><br>

-- åªæ·»åŠ ä¸€æ¡ç™½åå•å’Œä¸€æ¡é»‘åå•<br>
INSERT INTO glpi_plugin_softwaremanager_whitelists (name, exact_match, is_active, date_creation) VALUES ('Bonjour', 1, 1, NOW());<br>
INSERT INTO glpi_plugin_softwaremanager_blacklists (name, exact_match, is_active, date_creation) VALUES ('Adobe Genuine Service', 1, 1, NOW());
        </div>
        <p>è¿™æ ·åº”è¯¥èƒ½çœ‹åˆ°: 1ä¸ªåˆè§„, 1ä¸ªè¿è§„, 48ä¸ªæœªç™»è®°</p>
    </div>

    <p><strong>â° æ‰§è¡Œä»»ä½•SQLåï¼Œè¯·ç«‹å³é‡æ–°è¿è¡Œåˆè§„æ€§æ‰«æéªŒè¯ç»“æœï¼</strong></p>
</body>
</html>